@import "tailwindcss";

/* CSS Variables - Core Design System - Glance Inspired */
:root {
  /* Colors - High-density Flat Design */
  --color-primary: hsl(43, 74%, 66%); /* Warmer, more vibrant primary color */
  --color-link: hsl(43, 74%, 66%); /* Link color matching primary */
  --color-link-hover: hsl(43, 84%, 76%); /* Brighter and more vibrant on hover */
  --color-background: hsl(240, 9%, 7%); /* Deeper background for better contrast */
  --color-widget-background: hsl(240, 8%, 10%); /* Slightly brighter with minimal contrast */
  --color-popover-background: hsl(240, 8%, 11%);

  /* Refined Typography Hierarchy - Lower contrast for softer appearance */
  --color-text-primary: hsl(210, 25%, 75%); /* Muted gray-blue for non-interactive titles in dark mode */
  --color-text-secondary: hsl(0, 0%, 75%); /* Secondary text */
  --color-text-body: hsl(0, 0%, 65%); /* Body/description text */
  --color-text-meta: hsl(0, 0%, 50%); /* Metadata like dates and tags */
  --color-text-muted: hsl(0, 0%, 38%); /* Supporting text */
  --color-text-disabled: hsl(0, 0%, 28%); /* Widget external titles - darker */

  --color-positive: hsl(90, 45%, 55%); /* Softer green for positive values */
  --color-negative: hsl(0, 55%, 65%); /* Less harsh red for negative values */

  /* German Learning Level Colors - Distinct colors for each level */
  --color-level-a1: hsl(205, 78%, 60%); /* Soft blue for A1 */
  --color-level-a2: hsl(145, 63%, 50%); /* Soft green for A2 */
  --color-level-b1: hsl(48, 89%, 60%); /* Soft yellow for B1 */
  --color-level-b2: hsl(28, 80%, 65%); /* Soft orange for B2 */
  --color-level-c1: hsl(260, 60%, 70%); /* Soft purple for C1 */
  --color-separator: hsl(240, 8%, 11%); /* Darker separators for flatter design */

  /* Light mode overrides - Paper-like comfort theme */
  &[data-theme="light"] {
    /* 1. 全新的纸张背景色 */
    --color-background: hsl(48, 25%, 96%); /* 柔和的亚麻白/纸张色 */
    --color-widget-background: hsl(48, 30%, 98%); /* 组件背景用更亮的奶油白，营造层次感 */
    --color-popover-background: hsl(48, 35%, 99%); /* 弹出层背景 */

    /* 2. 交互颜色保持不变 (水绿色) */
    --color-primary: hsl(170, 50%, 40%); /* 图表线条 - 稍微加深提高对比度 */
    --color-link: hsl(170, 45%, 45%); /* 链接颜色保持原样 */
    --color-link-hover: hsl(170, 45%, 55%);

    /* 3. 调整文字颜色以适应更亮的背景 */
    --color-text-primary: hsl(220, 30%, 30%); /* 主要标题 - 深蓝灰色，与背景形成强对比 */
    --color-text-secondary: hsl(30, 8%, 25%); /* 次级标题 */
    --color-text-body: hsl(30, 7%, 35%); /* 正文 - 保持不变 */
    --color-text-meta: hsl(30, 5%, 50%); /* 元数据 - 保持不变 */
    --color-text-muted: hsl(30, 5%, 60%); /* 辅助性文字 */
    --color-text-disabled: hsl(30, 5%, 75%); /* 最弱的文字 */

    /* 4. 状态和分隔线颜色 */
    --color-positive: hsl(140, 60%, 35%);
    --color-negative: hsl(0, 60%, 50%);
    --color-separator: hsl(45, 20%, 92%); /* 分隔线颜色微调 */

    /* 5. German等级颜色 - 浅色模式下加深以提高对比度 */
    --color-level-a1: hsl(205, 70%, 45%); /* A1: 深蓝色 */
    --color-level-a2: hsl(145, 70%, 35%); /* A2: 深绿色 */
    --color-level-b1: hsl(48, 80%, 45%); /* B1: 深黄色 */
    --color-level-b2: hsl(28, 85%, 50%); /* B2: 深橙色 */
    --color-level-c1: hsl(260, 65%, 55%); /* C1: 深紫色 */
  }

  /* Typography - JetBrains Mono with refined hierarchy */
  --font-family-mono: var(--font-jetbrains-mono), monospace;
  --font-family-sans: var(--font-jetbrains-mono), monospace;
  --font-family-paragraph: var(--font-jetbrains-mono), monospace;

  /* Font Scale - Tight hierarchy for high information density */
  --font-size-xl: 1.6rem; /* Widget main titles - uppercase */
  --font-size-lg: 1.35rem; /* Section headings */
  --font-size-md: 1.15rem; /* Subsection headings */
  --font-size-base: 1rem; /* Body text */
  --font-size-sm: 0.9rem; /* Secondary information */
  --font-size-xs: 0.8rem; /* Metadata, timestamps */
  --font-size-xxs: 0.7rem; /* Labels, captions */

  /* Font Weights - Multiple levels for hierarchy */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Layout & Spacing - Tighter grid system for higher density */
  --widget-gap: 18px; /* Slightly larger widget gaps */
  --widget-padding: 16px; /* Reduced internal padding for more content */
  --element-gap: 10px; /* Smaller element gaps */
  --content-gap: 6px; /* Tighter content gaps */
  --micro-gap: 4px; /* Unchanged micro gaps */

  --border-radius: 3px; /* Minimal rounding - flatter design */
  --line-height-tight: 1.3; /* For headings */
  --line-height-normal: 1.5; /* For body text */
  --line-height-relaxed: 1.6; /* For reading content */

  /* Transitions */
  --transition-fast: 0.15s ease-out;
  --transition-normal: 0.25s ease-out;
  --transition-slow: 0.35s ease-out;
}

@theme inline {
  --color-background: var(--color-background);
  --color-foreground: var(--color-text-body);
  --color-primary: var(--color-primary);
  --font-sans: "JetBrains Mono", monospace;
  --font-mono: "JetBrains Mono", monospace;

  /* Extended color palette - Unified naming */
  --color-text-primary: var(--color-text-primary);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-body: var(--color-text-body);
  --color-text-meta: var(--color-text-meta);
  --color-text-muted: var(--color-text-muted);
  --color-text-disabled: var(--color-text-disabled);

  /* Aliases for consistency - map undefined names to existing colors */
  --color-text-base: var(--color-text-body);
  --color-text-paragraph: var(--color-text-body);
  --color-text-highlight: var(--color-text-primary);
  --color-text-subdue: var(--color-text-muted);
  --color-border: var(--color-separator);
  --color-widget-border: var(--color-separator);

  /* Link colors */
  --color-link: var(--color-link);
  --color-link-hover: var(--color-link-hover);

  /* Spacing scale */
  --space-micro: var(--micro-gap);
  --space-content: var(--content-gap);
  --space-element: var(--element-gap);
  --space-widget: var(--widget-gap);

  /* Font sizes */
  --text-xxs: var(--font-size-xxs);
  --text-xs: var(--font-size-xs);
  --text-sm: var(--font-size-sm);
  --text-base: var(--font-size-base);
  --text-md: var(--font-size-md);
  --text-lg: var(--font-size-lg);
  --text-xl: var(--font-size-xl);
}

/* Base Styles */
* {
  box-sizing: border-box;
}

html {
  color-scheme: dark light;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-mono);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  color: var(--color-text-body);
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition:
    background-color var(--transition-normal),
    color var(--transition-normal);
}

/* Typography - Refined hierarchy for information density */
h1 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-link);
  line-height: var(--line-height-tight);
  margin: 0 0 var(--element-gap) 0;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  transition: color var(--transition-fast);
}

h1:hover {
  color: var(--color-link-hover);
}

h2 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-link);
  line-height: var(--line-height-tight);
  margin: 0 0 var(--content-gap) 0;
  transition: color var(--transition-fast);
}

h2:hover {
  color: var(--color-link-hover);
}

h3 {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-link);
  line-height: var(--line-height-tight);
  margin: 0 0 var(--content-gap) 0;
  transition: color var(--transition-fast);
}

h3:hover {
  color: var(--color-link-hover);
}

h4 {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  line-height: var(--line-height-tight);
  margin: 0 0 var(--micro-gap) 0;
}

h5,
h6 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-meta);
  line-height: var(--line-height-tight);
  margin: 0 0 var(--micro-gap) 0;
}

p {
  margin: 0 0 var(--content-gap) 0;
  color: var(--color-text-body);
  font-family: var(--font-family-paragraph);
  line-height: var(--line-height-normal);
}

/* Text utility classes for different hierarchy levels */
.text-primary {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-semibold);
}

.text-secondary {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
}

.text-body {
  color: var(--color-text-body);
  font-weight: var(--font-weight-normal);
}

.text-meta {
  color: var(--color-text-meta);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-normal);
}

.text-muted {
  color: var(--color-text-muted);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-normal);
}

.text-disabled {
  color: var(--color-text-disabled);
  font-size: var(--font-size-xs);
}

a {
  color: var(--color-link);
  text-decoration: none;
  transition: color var(--transition-fast);
}

a:hover {
  color: var(--color-link-hover);
}

code {
  font-family: var(--font-family-mono);
  font-size: 0.9em;
  background: var(--color-widget-background);
  padding: 0.2em 0.4em;
  border-radius: 3px;
  border: 1px solid var(--color-separator);
}

pre {
  font-family: var(--font-family-mono);
  background: var(--color-widget-background);
  padding: 1rem;
  border-radius: var(--border-radius);
  border: 1px solid var(--color-separator);
  overflow-x: auto;
  margin: 1rem 0;
}

pre code {
  background: none;
  border: none;
  padding: 0;
}

/* Layout Components - Masonry Style */
.page-container {
  min-height: 100vh;
  padding: var(--widget-gap);
  width: 100%; /* Use full width */
  margin: 0;
}

.page-columns {
  display: flex;
  gap: var(--widget-gap);
  align-items: flex-start;
}

/* Masonry columns - narrow and wide */
.masonry-narrow {
  flex: 0 0 280px;
  display: flex;
  flex-direction: column;
  gap: var(--widget-gap);
}

.masonry-wide {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--widget-gap);
}

.masonry-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--widget-gap);
  align-items: start;
}

.dynamic-columns {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--widget-gap);
  align-items: start;
}

/* Dashboard Flex - High Density 3-Column Layout */
.dashboard-grid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--widget-gap);
  align-items: flex-start;
  width: 100%; /* Use full width */
  margin: 0;
  justify-content: flex-start; /* Start from left */
}

/* Left Column - Status Overview - Compact */
.dashboard-left {
  flex: 1; /* Grow to fill space */
  display: flex;
  flex-direction: column;
  gap: var(--widget-gap);
  min-width: 280px;
  /* Remove height and overflow restrictions */
}

/* Main Column - Core Feed & Output */
.dashboard-main {
  flex: 2; /* Take more space for main content */
  display: flex;
  flex-direction: column;
  gap: var(--widget-gap);
  min-width: 400px;
  /* Remove height and overflow restrictions */
}

/* Right Column - Insights & Philosophy */
.dashboard-right {
  flex: 1; /* Grow to fill space */
  display: flex;
  flex-direction: column;
  gap: var(--widget-gap);
  min-width: 280px;
  /* Remove height and overflow restrictions */
}

/* Widget Container Styling - Content-driven heights */
.dashboard-left .widget-container,
.dashboard-main .widget-container,
.dashboard-right .widget-container {
  overflow: hidden;
  transform-origin: top left;
  width: 100%;
  position: relative;
  height: auto;
  min-height: fit-content;
  display: flex;
  flex-direction: column;
}

.dashboard-left .widget,
.dashboard-main .widget,
.dashboard-right .widget {
  flex: 1;
  min-height: 0; /* Allow shrinking */
}

/* Auto-sizing widget containers - content determines height */
.dashboard-left .widget-container,
.dashboard-main .widget-container,
.dashboard-right .widget-container {
  /* All widgets auto-size based on content */
  flex: none;
  height: auto;
}

/* Responsive Adjustments - Flexbox handles most automatically */

/* Content Balance - High Information Density */

/* Compact status widgets - maximum information density */
.dashboard-left .widget {
  font-size: var(--font-size-sm); /* Smaller text for more info */
  padding: var(--widget-padding);
  line-height: var(--line-height-tight);
}

/* External titles in left column should be even smaller */
.dashboard-left .widget-external-title {
  font-size: var(--font-size-xxs);
}

.dashboard-left .widget .widget-header {
  margin-bottom: var(--content-gap); /* Very tight spacing */
  padding-bottom: var(--micro-gap);
}

.dashboard-left .widget .space-y-2 > * {
  margin-top: var(--micro-gap); /* Very tight vertical spacing */
}

.dashboard-left .widget .space-y-3 > * {
  margin-top: var(--content-gap); /* Slightly more space */
}

.dashboard-left .widget .space-y-2 > *:first-child,
.dashboard-left .widget .space-y-3 > *:first-child {
  margin-top: 0;
}

/* Ultra-compact spacing for feeds */
.dashboard-left .widget .space-y-1 > * {
  margin-top: var(--micro-gap);
}

.dashboard-left .widget .space-y-1 > *:first-child {
  margin-top: 0;
}

/* Compact styling for left column charts and stats */
.dashboard-left .widget .text-base {
  font-size: 0.9rem; /* Smaller stats numbers */
}

.dashboard-left .widget .text-xs {
  font-size: 0.7rem; /* Even smaller labels */
}

.dashboard-left .widget .flex.justify-between.items-center {
  margin-bottom: 0.75rem; /* Tighter spacing for stats rows */
}

.dashboard-left .widget canvas {
  margin-top: 0.5rem; /* Reduce chart top margin */
}

.dashboard-main .widget {
  /* Main content - enhanced readability with hierarchy */
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  padding: var(--widget-padding);
}

.dashboard-right .widget {
  /* Insights - optimized for reading content */
  font-size: var(--font-size-sm);
  line-height: var(--line-height-relaxed);
  padding: var(--widget-padding);
}

/* Dynamic content adaptation */
.dashboard-main .widget:first-child {
  /* Spotlight Projects - flat design */
  background: var(--color-widget-background);
  /* No borders for flat design */
}

.dashboard-right .widget:first-child {
  /* Philosophy - optimized for reading */
  line-height: var(--line-height-relaxed);
}

/* Widget System - Content-First with External Titles */
.widget-container {
  display: flex;
  flex-direction: column;
  gap: var(--micro-gap);
}

.widget-external-header {
  /* External title styling - subtle and minimal */
  margin: 0;
  padding: 0;
}

.widget-external-title {
  font-size: var(--font-size-xxs); /* Very small font */
  font-weight: var(--font-weight-normal); /* Normal weight */
  color: var(--color-text-disabled); /* Very dim color */
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.05em; /* Slightly spaced letters */
  line-height: var(--line-height-tight);
}

.widget {
  background: var(--color-widget-background);
  border: none; /* Remove borders for flat design */
  border-radius: var(--border-radius);
  padding: var(--widget-padding);
  /* NO shadows - completely flat */
  position: relative;
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast);
  /* Subtle background distinction only */
  flex: 1;
}

/* Light mode specific enhancements */
[data-theme="light"] .widget {
  border: 1px solid hsl(45, 15%, 90%); /* 很细的边框增强区分 */
  box-shadow: 0 1px 2px hsla(0, 0%, 0%, 0.05); /* 极轻微的阴影 */
}

.widget:hover {
  transform: translateY(-3px); /* Subtle upward movement on hover */
  box-shadow: 0 4px 20px -5px hsla(0, 0%, 0%, 0.2); /* Soft shadow on hover */
}

/* Widget separation through background contrast only */
.widget-container + .widget-container {
  margin-top: var(--widget-gap);
}

/* Legacy widget header styles - now unused but kept for compatibility */
.widget-header {
  margin-bottom: var(--element-gap);
  padding-bottom: var(--content-gap);
  border-bottom: 1px solid var(--color-separator);
}

.widget-title {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

/* Navigation */
.nav {
  display: flex;
  gap: 2rem;
  align-items: center;
  margin-bottom: 2rem;
}

.nav-link {
  font-weight: 500;
  color: var(--color-text-meta); /* Use softer meta color instead of bright text */
  transition: color var(--transition-fast);
}

.nav-link:hover {
  color: var(--color-text-primary); /* Brighter on hover */
}

.nav-link.active {
  color: var(--color-link); /* Use theme color for active state */
  position: relative; /* Enable positioning for pseudo-element */
}

.nav-link.active::after {
  content: "";
  position: absolute;
  bottom: -6px; /* Position below the text */
  left: 0;
  right: 0;
  height: 2px; /* Height of the horizontal bar */
  background: var(--color-link); /* Same color as active text */
  border-radius: 1px; /* Slightly rounded bar */
  transition: background var(--transition-fast);
}

/* Buttons - Flat Design */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--content-gap);
  padding: var(--content-gap) var(--element-gap);
  border: none; /* Flat design - no borders */
  border-radius: var(--border-radius);
  background: var(--color-widget-background);
  color: var(--color-text-body);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  font-family: inherit;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-decoration: none;
}

.btn:hover {
  background: var(--color-popover-background);
  color: var(--color-text-primary);
}

.btn-primary {
  background: var(--color-primary);
  color: var(--color-background);
}

.btn-primary:hover {
  background: var(--color-text-primary);
}

/* Card Components - Flat Design */
.card {
  background: var(--color-widget-background);
  border: none; /* Remove borders */
  border-radius: var(--border-radius);
  padding: var(--element-gap);
  /* No shadows */
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background-color var(--transition-fast);
}

.card:hover {
  transform: translateY(-3px); /* Subtle upward movement on hover */
  box-shadow: 0 4px 20px -5px hsla(0, 0%, 0%, 0.2); /* Soft shadow on hover */
  background: var(--color-popover-background);
}

.card:hover .card-title {
  color: var(--color-link-hover);
}

/* Featured Articles - Color change only, no lift */
.card-color-only {
  background: var(--color-widget-background);
  border: none;
  border-radius: var(--border-radius);
  padding: var(--element-gap);
  transition: none;
}

.card-color-only:hover .card-title {
  color: var(--color-link-hover);
}

/* Spotlight Projects - Lift only, no color change */
.card-lift-only {
  background: var(--color-widget-background);
  border: none;
  border-radius: var(--border-radius);
  padding: var(--element-gap);
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast);
}

.card-lift-only:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 20px -5px hsla(0, 0%, 0%, 0.2);
}

.card-title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  margin-bottom: var(--micro-gap);
  color: var(--color-link);
  transition: color var(--transition-fast);
  line-height: var(--line-height-tight);
}

.card-meta {
  color: var(--color-text-meta);
  font-size: var(--font-size-xs);
  margin-bottom: var(--content-gap);
  line-height: var(--line-height-normal);
}

/* List Styles - High Density */
.list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.list-item {
  padding: var(--content-gap) 0;
  border-bottom: 1px solid var(--color-separator);
  transition: background-color var(--transition-fast);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-tight);
}

.list-item:last-child {
  border-bottom: none;
}

/* Dense list variant for maximum info density */
.list-dense .list-item {
  padding: var(--micro-gap) 0;
  font-size: var(--font-size-xs);
}

/* Form Elements */
.input {
  width: 100%;
  padding: 0.75rem;
  background: transparent;
  border: none;
  border-bottom: 2px solid var(--color-separator);
  color: var(--color-text-body);
  font-family: inherit;
  font-size: inherit;
  transition: border-color var(--transition-fast);
}

.input:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* Animations */
@keyframes pageContentEntrance {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes widgetGroupContentEntrance {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes loadingIconSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes breathing {
  0%,
  100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.02);
    opacity: 0.95;
  }
}

.animate-entrance {
  animation: pageContentEntrance 0.6s ease-out;
}

.animate-widget-entrance {
  animation: widgetGroupContentEntrance 0.4s ease-out;
}

.animate-spin {
  animation: loadingIconSpin 1s linear infinite;
}

/* Theme Toggle */
.theme-toggle {
  position: fixed;
  top: 2rem;
  right: 2rem;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 1px solid var(--color-separator);
  background: var(--color-widget-background);
  color: var(--color-text-body);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  z-index: 100;
}

.theme-toggle:hover {
  background: var(--color-popover-background);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

/* Additional Responsive Design Improvements */

/* Skeleton Loading States */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-separator) 25%,
    var(--color-widget-background) 50%,
    var(--color-separator) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.skeleton-text {
  height: 1em;
  border-radius: 4px;
}

.skeleton-title {
  height: 1.5em;
  width: 60%;
  border-radius: 4px;
}

/* Prose Styles for Blog Content */
.prose {
  font-family: var(--font-family-paragraph);
  line-height: var(--line-height);
  color: var(--color-text-paragraph);
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: var(--color-text-highlight);
  font-weight: 600;
  line-height: 1.3;
  margin-top: 2rem;
  margin-bottom: 1rem;
  font-family: var(--font-family-mono);
}

.prose h1 {
  font-size: var(--font-size-h1);
}
.prose h2 {
  font-size: var(--font-size-h2);
}
.prose h3 {
  font-size: var(--font-size-h3);
}
.prose h4 {
  font-size: var(--font-size-h4);
}
.prose h5 {
  font-size: var(--font-size-h5);
}
.prose h6 {
  font-size: var(--font-size-h6);
}

.prose p {
  margin-bottom: 1.75rem;
  font-family: var(--font-family-paragraph);
  line-height: 1.8;
}

.prose a {
  color: var(--color-link);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all var(--transition-fast);
}

.prose a:hover {
  color: var(--color-link-hover);
  border-bottom-color: var(--color-link);
}

.prose strong {
  color: var(--color-text-highlight);
  font-weight: 600;
}

.prose em {
  color: var(--color-primary);
  font-style: italic;
}

.prose code {
  font-family: var(--font-family-mono);
  font-size: 0.875em;
  background: var(--color-widget-background);
  color: var(--color-text-highlight);
  padding: 0.25em 0.5em;
  border-radius: 3px;
  border: 1px solid var(--color-separator);
}

.prose pre {
  font-family: var(--font-family-mono);
  background: var(--color-widget-background);
  color: var(--color-text-paragraph);
  padding: 1.5rem;
  border-radius: var(--border-radius);
  border: 1px solid var(--color-separator);
  overflow-x: auto;
  margin: 1.5rem 0;
  font-size: 0.875em;
  line-height: 1.5;
}

.prose pre code {
  background: none;
  border: none;
  padding: 0;
  font-size: inherit;
  color: inherit;
}

.prose blockquote {
  border-left: 4px solid var(--color-primary);
  background: var(--color-widget-background);
  padding: 1rem 1.5rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: var(--color-text-paragraph);
}

.prose blockquote p {
  margin: 0;
}

.prose ul,
.prose ol {
  margin-bottom: 1.5rem;
  padding-left: 2rem;
}

.prose li {
  margin-bottom: 0.5rem;
  color: var(--color-text-paragraph);
  font-family: var(--font-family-paragraph);
}

.prose li::marker {
  color: var(--color-text-subdue);
}

.prose hr {
  border: none;
  height: 1px;
  background: var(--color-separator);
  margin: 2rem 0;
}

.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
}

.prose th,
.prose td {
  border: 1px solid var(--color-separator);
  padding: 0.75rem 1rem;
  text-align: left;
}

.prose th {
  background: var(--color-widget-background);
  color: var(--color-text-highlight);
  font-weight: 600;
}

.prose img {
  max-width: 100%;
  height: auto;
  border-radius: var(--border-radius);
  margin: 1.5rem 0;
}

/* Scrollbar utilities */
.scrollbar-hide {
  /* IE and Edge */
  -ms-overflow-style: none;
  /* Firefox */
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  /* Safari and Chrome */
  display: none;
}

/* Infinite scroll animation */
.infinite-scroll-container {
  position: relative;
  overflow: hidden;
  width: 100%;
}

.infinite-scroll-container::before,
.infinite-scroll-container::after {
  content: "";
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  z-index: 10;
  pointer-events: none;
  opacity: 0.6;
  transition: opacity var(--transition-fast);
}

.infinite-scroll-container::before {
  left: 8px;
  border-right: 8px solid var(--color-link);
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
}

.infinite-scroll-container::after {
  right: 8px;
  border-left: 8px solid var(--color-link);
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
}

.infinite-scroll-container:hover::before,
.infinite-scroll-container:hover::after {
  opacity: 1;
}

.infinite-scroll-track {
  display: flex;
  gap: 1rem;
  width: fit-content;
  animation: infiniteScroll var(--scroll-duration, 30s) linear infinite;
}

.infinite-scroll-track:hover {
  animation-play-state: paused;
}

@keyframes infiniteScroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

/* Tailwind line-clamp support */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Spacing utilities for high-density layouts */
.space-y-micro > * + * {
  margin-top: var(--micro-gap);
}

.space-y-content > * + * {
  margin-top: var(--content-gap);
}

.space-y-element > * + * {
  margin-top: var(--element-gap);
}

.gap-micro {
  gap: var(--micro-gap);
}

.gap-content {
  gap: var(--content-gap);
}

.gap-element {
  gap: var(--element-gap);
}

/* Text size utilities */
.text-xxs {
  font-size: var(--font-size-xxs);
}

.text-xs {
  font-size: var(--font-size-xs);
}

.text-sm {
  font-size: var(--font-size-sm);
}

.text-md {
  font-size: var(--font-size-md);
}

.text-lg {
  font-size: var(--font-size-lg);
}

.text-xl {
  font-size: var(--font-size-xl);
}

/* Font weight utilities */
.font-normal {
  font-weight: var(--font-weight-normal);
}

.font-medium {
  font-weight: var(--font-weight-medium);
}

.font-semibold {
  font-weight: var(--font-weight-semibold);
}

.font-bold {
  font-weight: var(--font-weight-bold);
}

/* Line height utilities */
.leading-tight {
  line-height: var(--line-height-tight);
}

.leading-normal {
  line-height: var(--line-height-normal);
}

.leading-relaxed {
  line-height: var(--line-height-relaxed);
}

/* Modern Responsive Design - Natural Content Reflow */
.dashboard-left .widget,
.dashboard-main .widget,
.dashboard-right .widget {
  /* Remove all scaling - let content flow naturally */
  transform: none;
  transition: none;
}

/* Responsive widget display classes */
.widget-narrow-reflow {
  display: none; /* Hidden by default */
}

.widget-wide-only {
  display: block; /* Visible by default */
}

/* Medium screens (tablet/small desktop) - 769px to 1199px */
@media (min-width: 769px) and (max-width: 1199px) {
  /* Hide right column widgets on medium screens, show them in left/main columns */
  .widget-wide-only {
    display: none;
  }

  .widget-narrow-reflow {
    display: block;
  }
}

/* Wide screens (large desktop) - 1200px and up */
@media (min-width: 1200px) {
  /* Restore right column widgets on wide screens */
  .widget-wide-only {
    display: block;
  }

  .widget-narrow-reflow {
    display: none;
  }
}

/* Narrow screens (mobile) - 768px and below */
@media (max-width: 768px) {
  .dashboard-grid {
    flex-direction: column;
  }

  /* Ensure all columns have consistent width in narrow layout */
  .dashboard-left,
  .dashboard-main,
  .dashboard-right {
    flex: none; /* Don't stretch */
    width: 100%; /* Use available width */
    min-width: auto; /* Reset min-width */
    max-width: none; /* No max width restriction */
  }

  .widget-narrow-reflow {
    display: block;
  }

  .widget-wide-only {
    display: none;
  }
}
